{% extends "base.html" %} {% load static %} {% block title %}Потвърди и завърши
поръчката | 3D Print Studio{% endblock %} {% block content %}
<section
  class="flex justify-center items-start min-h-[80vh] bg-surface dark:bg-surface-dark px-4 py-12"
>
  <div
    class="w-full max-w-2xl bg-surface dark:bg-surface-dark p-8 rounded-xl shadow-md border border-border dark:border-border-dark"
  >
    <h1
      class="text-2xl font-bold text-text-base dark:text-text-dark mb-2 text-center"
    >
      Последна стъпка от твоята поръчка
    </h1>
    <p class="text-center text-text-muted dark:text-text-muted mb-6">
      Моля, попълни информацията по-долу, за да завършим твоята поръчка.
    </p>

    <form method="post" class="space-y-6">
      {% csrf_token %}

      <!-- Form fields -->
      <div class="space-y-6">
        <!-- Име -->
        <div>
          <label
            for="id_first_name"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Име
          </label>
          <input
            type="text"
            name="first_name"
            id="id_first_name"
            value="{{ form.first_name.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи име"
            required
          />
          {% if form.first_name.errors %}
          <p class="text-sm text-red-600 mt-1">
            {{ form.first_name.errors.0 }}
          </p>
          {% endif %}
        </div>

        <!-- Фамилия -->
        <div>
          <label
            for="id_last_name"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Фамилия
          </label>
          <input
            type="text"
            name="last_name"
            id="id_last_name"
            value="{{ form.last_name.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи фамилия"
            required
          />
          {% if form.last_name.errors %}
          <p class="text-sm text-red-600 mt-1">{{ form.last_name.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Имейл -->
        <div>
          <label
            for="id_email"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Имейл
          </label>
          <input
            type="email"
            name="email"
            id="id_email"
            value="{{ form.email.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи имейл"
            required
          />
          {% if form.email.errors %}
          <p class="text-sm text-red-600 mt-1">{{ form.email.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Адрес за доставка -->
        <div>
          <label
            for="id_address"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Адрес за доставка
          </label>
          <input
            type="text"
            name="address"
            id="id_address"
            value="{{ form.address.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи адрес"
            required
          />
          {% if form.address.errors %}
          <p class="text-sm text-red-600 mt-1">{{ form.address.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Телефон -->
        <div>
          <label
            for="id_phone_number"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Телефон
          </label>
          <input
            type="text"
            name="phone_number"
            id="id_phone_number"
            value="{{ form.phone_number.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи телефонен номер"
            required
          />
          {% if form.phone_number.errors %}
          <p class="text-sm text-red-600 mt-1">
            {{ form.phone_number.errors.0 }}
          </p>
          {% endif %}
        </div>
        <!-- Пощенски код -->
        <div>
          <label
            for="id_postal_code"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Пощенски код
          </label>
          <input
            type="text"
            name="postal_code"
            id="id_postal_code"
            value="{{ form.postal_code.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи пощенски код"
            required
          />
          {% if form.postal_code.errors %}
          <p class="text-sm text-red-600 mt-1">
            {{ form.postal_code.errors.0 }}
          </p>
          {% endif %}
        </div>

        <!-- Град -->
        <div>
          <label
            for="id_city"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Град
          </label>
          <input
            type="text"
            name="city"
            id="id_city"
            value="{{ form.city.value|default_if_none:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи град"
            required
          />
          {% if form.city.errors %}
          <p class="text-sm text-red-600 mt-1">{{ form.city.errors.0 }}</p>
          {% endif %}
        </div>
        <!-- Коментар (по избор) -->
        <div>
          <label
            for="id_comment"
            class="block text-sm text-text-base dark:text-text-dark mb-1"
          >
            Бележка към поръчката (по избор)
          </label>
          <textarea
            name="comment"
            id="id_comment"
            rows="4"
            class="w-full px-4 py-3 rounded-xl border border-border dark:border-border-dark bg-white dark:bg-gray-800 text-text-base dark:text-text-dark"
            placeholder="Въведи бележки ако има нужда"
          >
{{ form.comment.value|default_if_none:'' }}</textarea
          >

          {% if form.comment.errors %}
          <p class="text-sm text-red-600 mt-1">{{ form.comment.errors.0 }}</p>
          {% endif %}
        </div>
      </div>

      <!-- Количка -->
      <div class="pt-4 border-t border-border dark:border-border-dark">
        <h2
          class="text-lg font-semibold text-text-base dark:text-text-dark mb-2"
        >
          Детайли на поръчката
        </h2>
        <ul class="text-sm text-text-muted dark:text-text-muted space-y-1">
          {% for item in cart %}
          <li>
            {{ item.product.name }} — {{ item.quantity }} бр. —
            <strong>{{ item.total_price }} лв.</strong>
          </li>
          {% endfor %}
        </ul>
        <p
          class="mt-4 font-semibold text-accent dark:text-accent-dark text-right"
        >
          Обща сума: {{ cart.get_total_price }} лв.
        </p>
      </div>

      {% comment %}
      <button
        type="submit"
        class="w-full bg-primary hover:bg-primary-hover text-white py-3 rounded-lg transition text-lg font-medium"
      >
        ✅ Потвърди и създай поръчка
      </button>
      {% endcomment %}

      <button
        type="submit"
        class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition"
      >
        Потвърди и създай поръчка
      </button>
    </form>
  </div>
</section>
{% endblock %}
