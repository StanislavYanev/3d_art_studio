{% extends "base.html" %}

  {% block title %}Поръчка | 3D Print Studio{% endblock %}
  
  {% block content %}
  <section class="py-16 px-4 max-w-3xl mx-auto">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 space-y-6 border border-gray-200 dark:border-gray-700">
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white text-center">Завършване на поръчка</h1>
  
      <form method="post" novalidate class="space-y-5">
        {% csrf_token %}
  
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label for="id_first_name" class="form-label">Име</label>
            {{ form.first_name }}
            {% if form.first_name.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.first_name.errors.0 }}</div>
            {% endif %}
          </div>
          <div>
            <label for="id_last_name" class="form-label">Фамилия</label>
            {{ form.last_name }}
            {% if form.last_name.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.last_name.errors.0 }}</div>
            {% endif %}
          </div>
          <div>
            <label for="id_email" class="form-label">Имейл</label>
            {{ form.email }}
            {% if form.email.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.email.errors.0 }}</div>
            {% endif %}
          </div>
          <div>
            <label for="id_phone_number" class="form-label">Телефон</label>
            {{ form.phone_number }}
            {% if form.phone_number.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.phone_number.errors.0 }}</div>
            {% endif %}
          </div>
          <div class="sm:col-span-2">
            <label for="id_address" class="form-label">Адрес</label>
            {{ form.address }}
            {% if form.address.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.address.errors.0 }}</div>
            {% endif %}
          </div>
          <div>
            <label for="id_city" class="form-label">Град</label>
            {{ form.city }}
            {% if form.city.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.city.errors.0 }}</div>
            {% endif %}
          </div>
          <div>
            <label for="id_courier" class="form-label">Куриер</label>
            {{ form.courier }}
            {% if form.courier.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.courier.errors.0 }}</div>
            {% endif %}
          </div>
          <div>
            <label for="id_delivery_type" class="form-label">Тип доставка</label>
            {{ form.delivery_type }}
          </div>
          <div class="sm:col-span-2" id="delivery-details-group">
            <label for="id_delivery_details" class="form-label">Адрес/офис</label>
            {{ form.delivery_details }}
            {% if form.delivery_details.errors %}
            <div class="text-red-500 text-sm mt-1">{{ form.delivery_details.errors.0 }}</div>
            {% endif %}
          </div>
          <div class="sm:col-span-2">
            <label for="id_comment" class="form-label">Бележка към поръчката</label>
            {{ form.comment }}
          </div>
        </div>

        <div class="mt-6 bg-gray-50 dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex items-center gap-3">
          <input type="checkbox" id="id_accept_terms" name="accept_terms"
                 class="w-5 h-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded dark:bg-gray-800 dark:border-gray-600 dark:text-indigo-400"
                 required>
        
          <label for="id_accept_terms" class="text-sm leading-relaxed text-gray-700 dark:text-gray-300">
            Съгласен съм с
            <a href="{% url 'home:terms' %}" target="_blank"
               class="underline text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 transition">
              Общите условия
            </a> и потвърждавам, че съм запознат с тях.
          </label>
          {% if form.accept_terms.errors %}
          <div class="text-red-500 text-sm mt-1">{{ form.accept_terms.errors.0 }}</div>
        {% endif %}
        </div>


        <div class="text-center">
          <button type="submit" class="mt-6 px-6 py-3 bg-indigo-600 text-white font-medium rounded-xl hover:bg-indigo-700 shadow transition">
            Потвърди поръчката
          </button>
        </div>
      </form>
    </div>
  </section>
  
  <style>
    .form-label {
      color: #374151;
  
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #374151;
    }
  
    input, select, textarea {
      width: 100%;
      padding: 0.6rem;
      border-radius: 0.5rem;
      border: 1px solid #d1d5db;
      background-color: #f9fafb;
      color: #111827;
      font-size: 1rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
  
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
      background-color: #fff;
    }
  
    .dark .form-label {
      color: #e5e7eb;
  }
  
  .dark input, .dark select, .dark textarea {
      background-color: #1f2937;
      color: #f3f4f6;
      border-color: #374151;
    }
  
    .dark input:focus, .dark select:focus, .dark textarea:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
    }
  </style>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const typeField = document.getElementById("id_delivery_type");
      const detailsLabel = document.querySelector("label[for='id_delivery_details']");
      const detailsInput = document.getElementById("id_delivery_details");
  
      function updateLabel() {
        if (typeField.value === "office") {
          detailsLabel.innerText = "Офис за доставка";
          detailsInput.placeholder = "Офис Еконт / Speedy...";
        } else {
          detailsLabel.innerText = "Адрес за доставка";
          detailsInput.placeholder = "ул. Примерна 1, вх. А...";
        }
      }
  
      if (typeField) {
        typeField.addEventListener("change", updateLabel);
        updateLabel();
      }
    });
  </script>
  {% endblock %}






